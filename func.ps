% Файл "func.ps"
% Рисование графика функции y = f(x)

% Перейти от пунктов (1/72 дюйма) к миллиметрам
2.83 2.83 scale

0.2 setlinewidth  % Установить толщину линии

% Нарисовать координатную ось X:
1 15 moveto   % переместиться в точку (1, 15)
60 15 lineto  % провести линию к точке (60, 15)
              % Рисуем стрелку:
57 16 moveto  % переместиться в точку (57, 16)
60 15 lineto  % провести линию к точке (60, 15)
57 14 lineto  % провести линию к точке (57, 14)
stroke        % нарисовать построенные линии

% Нарисовать координатную ось Y:
30 1 moveto   % переместиться в точку (30, 1)
30 30 lineto  % провести линию к точке (30, 30)
              % Рисуем стрелку:
29 27 moveto  % переместиться в точку (29, 27)
30 30 lineto  % провести линию к точке (30, 30)
31 27 lineto  % провести линию к точке (31, 27)
stroke        % нарисовать построенные линии

% Определение функции
%   f(x) = 5 * sin((x - 30) * 0.2 * 180/Pi) + 15
% Дано: число x на вершине стека.
% Надо: заменить вершину стека на f(x).
/Func {
    30 sub 0.2 mul 57.296 mul sin 5 mul 15 add
} def

% Рисуем график функции

0.3 setlinewidth  % установить толщину линии
2 2 Func moveto   % переместиться в точку (2, f(2))
2.5 0.5 58 { % цикл для x от 2.5 до 58 шаг 0.5
    dup      %   удвоить вершину стека
    Func     %   заменить x в вершине стека на f(x)
    lineto   %   провести линию к точке (x, f(x))
} for        % конец цикла
stroke       % нарисовать построенные линии

/Times-Roman findfont % загрузить шрифт Times-Roman
4 scalefont       % установить размер шрифта 4 мм
setfont           % установить текущий шрифт

40 23 moveto      % переместиться в точку (40, 23)
(y = sin x) show  % напечатать текст "y = sin x"

% Надписи на осях координат
59 11 moveto      % переместиться в точку (59, 11)
(x) show          % напечатать текст "x"

26 28 moveto      % переместиться в точку (26, 28)
(y) show          % напечатать текст "y"

showpage          % напечатать страницу
